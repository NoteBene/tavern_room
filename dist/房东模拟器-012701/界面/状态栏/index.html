<!doctype html><html lang="zh-CN"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>æˆ¿ä¸œ - ä»ªè¡¨é¢æ¿</title><script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script><style>:root{--primary-yellow:#ffd700;--primary-brown:#8b4513;--light-yellow:#fff8dc;--cream-bg:#faf3e0;--cream-dark:#f5e6ca;--cream-darker:#e8d9b5;--text-dark:#5d4037;--accent-gold:#d4af37;--border-light:#d7ccc8}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Microsoft YaHei',sans-serif;background:var(--cream-bg);color:var(--text-dark);margin:0;padding:6px;min-height:100vh}.card{max-width:980px;margin:0 auto;background:#fff;border-radius:12px;padding:12px 8px;box-shadow:0 2px 12px rgba(0,0,0,.08);border:1px solid var(--border-light)}.top{display:flex;justify-content:space-between;align-items:center;gap:6px;padding:6px 0;border-bottom:1px solid var(--border-light);margin-bottom:8px}.time{color:#795548;font-size:12px;font-weight:500}.top-stats{display:flex;gap:6px}.stat{background:var(--cream-dark);border:1px solid var(--border-light);padding:4px 10px;border-radius:6px;font-size:10px;color:var(--text-dark);min-width:80px;text-align:center}.stat strong{color:var(--primary-brown);font-size:11px}.tabs{display:flex;gap:8px;margin:8px 0;padding-bottom:2px;border-bottom:1px solid var(--border-light)}.tabs button{padding:6px 12px;border-radius:6px;border:2px solid transparent;background:var(--cream-dark);color:var(--text-dark);cursor:pointer;font-size:12px;font-weight:500;display:flex;align-items:center;gap:4px;transition:all .2s}.tabs button:hover{transform:translateY(-1px);box-shadow:0 2px 4px rgba(0,0,0,.1)}.tabs button.active{color:#fff;border-color:var(--accent-gold);box-shadow:0 2px 4px rgba(212,175,55,.2)}.tabs button:first-child.active{background:var(--primary-yellow);color:#5d4037}.tabs button:nth-child(2).active{background:#8b4513}.tabs button:nth-child(3).active{background:#2e7d32}.tabs button:nth-child(4).active{background:#1565c0}.room-tabs{display:flex;gap:4px;margin-bottom:4px;flex-wrap:wrap}.room-tabs button{padding:4px 4px;border-radius:4px;border:1px solid var(--border-light);background:var(--light-yellow);color:var(--text-dark);cursor:pointer;font-size:10px;transition:all .2s;min-width:30px;text-align:center}.room-tabs button:hover{background:#ffecb3}.room-tabs button.active{background:var(--primary-yellow);border-color:var(--accent-gold);font-weight:600;box-shadow:0 1px 3px rgba(255,215,0,.3)}.guest-panel{display:flex;flex-direction:column;gap:8px}.guest-header{display:flex;align-items:center;gap:12px;margin-bottom:8px}.guest-name{font-size:16px;font-weight:700;color:#5d4037;border-bottom:2px solid var(--cream-dark);padding-bottom:4px}.char-portrait{width:64px;height:64px;flex:0 0 64px;display:flex;align-items:center;justify-content:center;overflow:hidden;border-radius:6px;border:1px solid var(--border-light);background:#fff}.char-portrait img{width:100%;height:100%;object-fit:cover;display:block}.progress-row{display:flex;gap:8px}.progress-item{flex:1;min-width:100px;background:var(--cream-dark);padding:8px;border-radius:6px;border:1px solid var(--border-light);display:flex;align-items:center;gap:8px}.progress-label{font-size:11px;color:#795548;font-weight:500;width:64px;flex:0 0 64px}.progress-value{font-size:14px;font-weight:700;color:var(--primary-brown);width:48px;text-align:right;flex:0 0 48px}.bar{height:8px;background:#e0e0e0;border-radius:4px;overflow:hidden;flex:1 1 auto}.bar>i{display:block;height:100%;background:linear-gradient(to right,#4caf50,#8bc34a);transition:width .5s ease}.bar.warn>i{background:linear-gradient(to right,#f44336,#ff9800)}.cards{display:flex;gap:8px;flex-wrap:wrap}.card-block{flex:1;min-width:180px;background:var(--cream-dark);padding:0 4px;border-radius:8px;border:1px solid var(--border-light)}.card-block h4{margin:2px 0 6px 0;padding:0;color:var(--text-dark);font-size:13px;display:flex;align-items:center;justify-content:space-between;cursor:pointer}.collapsible-header{display:flex;align-items:center;gap:6px}.collapse-icon{transition:transform .3s;font-size:6px;color:#795548;margin-right:2px}.collapsed .collapse-icon{transform:rotate(-90deg)}.card-content{overflow:hidden;transition:max-height .3s ease}.collapsed+.card-content{max-height:0}.card-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:6px;margin-top:6px}.card-item{background:#fff;padding:6px;border-radius:4px;border:1px solid var(--border-light);font-size:10px}.card-item strong{color:var(--primary-brown);display:block;font-size:9px;margin-bottom:2px}.list-cards{display:flex;flex-wrap:wrap;gap:8px}.list-cards .card-block{width:180px}.empty-room,.empty-state{text-align:center;padding:40px 20px;color:#795548;font-size:12px;background:var(--cream-dark);border-radius:8px;border:1px dashed var(--border-light);margin:10px 0}.empty-room::before,.empty-state::before{display:block;font-size:32px;margin-bottom:12px;opacity:.6}.empty-room::before{content:'ğŸ '}.tab-icon{font-size:12px}.empty-state[data-type=props]::before{content:'ğŸ’'}.empty-state[data-type=monitor]::before{content:'ğŸ“¹'}.empty-state[data-type=tasks]::before{content:'ğŸ“‹'}.guest-info{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:8px;margin-top:8px;font-size:11px}.guest-info>div{background:var(--cream-dark);padding:6px 10px;border-radius:4px;border:1px solid var(--border-light)}.guest-info strong{color:var(--primary-brown)}@media (max-width:640px){.card{padding:8px 6px}.card-grid{grid-template-columns:repeat(2,1fr)}.cards{flex-direction:column}.card-block{min-width:100%}.list-cards .card-block{width:100%}.top{flex-direction:column;align-items:flex-start;gap:6px}.top-stats{width:100%;justify-content:space-between;flex-wrap:wrap}.stat{flex:1;min-width:100px}.tabs{flex-wrap:wrap}.tabs button{flex:1;justify-content:center}.progress-row{flex-direction:column}}</style><script type="module">import{waitUntil as t}from'https://testingcf.jsdelivr.net/npm/async-wait-until/+esm';import{createPinia as e}from'https://testingcf.jsdelivr.net/npm/pinia/+esm';var a={889(t,e){e.A=(t,e)=>{const a=t.__vccOpts||t;for(const[t,n]of e)a[t]=n;return a}}},n={};const r=Vue;var s=function t(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={exports:{}};return a[e](s,s.exports,t),s.exports}(889);const i={},o=(0,s.A)(i,[['render',function(t,e){return(0,r.openBlock)(),(0,r.createElementBlock)('div')}]]);$(async()=>{await waitGlobalInitialized('Mvu'),await t(()=>_.has(getVariables({type:'message'}),'stat_data')),(0,r.createApp)(o).use(e()).mount('#app')});
//# sourceMappingURL=index.js.map</script><style>
</style></head><body><div id="app" class="card"><div class="top"><div><div class="time">{{ stat['å½“å‰æ—¶é—´'] || 'â€”' }}</div></div><div class="top-stats"><div class="stat">èµ„é‡‘: <strong>{{ stat['ä¸»è§’èµ„é‡‘'] ?? 'â€”' }}</strong></div><div class="stat">å…¬å¯“çŸ¥ååº¦: <strong>{{ stat['å…¬å¯“çŸ¥ååº¦'] ?? 'â€”' }}</strong></div><div class="stat">é…’å§çŸ¥ååº¦: <strong>{{ stat['é…’å§çŸ¥ååº¦'] ?? 'â€”' }}</strong></div></div></div><div class="tabs" role="tablist"><button :class="{active:tab==='æˆ¿å®¢'}" @click="tab='æˆ¿å®¢'"><span class="tab-icon">ğŸ‘¥</span></button> <button :class="{active:tab==='é“å…·'}" @click="tab='é“å…·'"><span class="tab-icon">ğŸ®</span></button> <button :class="{active:tab==='ç›‘æ§'}" @click="tab='ç›‘æ§'"><span class="tab-icon">ğŸ“±</span></button> <button :class="{active:tab==='äº‹åŠ¡'}" @click="tab='äº‹åŠ¡'"><span class="tab-icon">ğŸ“…</span></button></div><div v-if="tab==='æˆ¿å®¢'"><div class="room-tabs"><button v-for="r in rooms" :key="r" :class="{active:activeRoom===r}" @click="setRoom(r)">{{ r }}</button></div><div id="room-content"><div v-if="guest" class="guest-panel"><div class="guest-header"><div class="char-portrait"><img v-if="portraitSrc" :src="portraitSrc" :alt="guestName"/></div><div class="guest-name">{{ guestName }}</div></div><div class="progress-row"><div class="progress-item"><div class="progress-label">å¥½æ„Ÿåº¦</div><div class="bar"><i :style="{width: (guest.å¥½æ„Ÿåº¦||0) + '%'}"></i></div><div class="progress-value">{{ guest.å¥½æ„Ÿåº¦ ?? 0 }}</div></div><div class="progress-item"><div class="progress-label">å •è½åº¦</div><div class="bar warn"><i :style="{width: (guest.å •è½åº¦||0) + '%'}"></i></div><div class="progress-value">{{ guest.å •è½åº¦ ?? 0 }}</div></div></div><div class="cards"><div class="card-block"><h4 :class="{collapsed: isBasicCollapsed}" @click="toggleCollapse('basic')"><span class="collapsible-header"><span class="collapse-icon">â–¼</span> åŸºæœ¬ä¿¡æ¯</span></h4><div class="card-content" :style="{maxHeight: isBasicCollapsed ? '0px' : '500px'}"><div class="card-grid"><div class="card-item" v-for="k in basicKeys" :key="k"><strong>{{ k }}</strong><div>{{ (guest['åŸºæœ¬ä¿¡æ¯'] && guest['åŸºæœ¬ä¿¡æ¯'][k]) ?? 'â€”' }}</div></div></div></div></div><div class="card-block"><h4 :class="{collapsed: isOutfitCollapsed}" @click="toggleCollapse('outfit')"><span class="collapsible-header"><span class="collapse-icon">â–¼</span> ç€è£…</span></h4><div class="card-content" :style="{maxHeight: isOutfitCollapsed ? '0px' : '500px'}"><div class="card-grid"><div class="card-item" v-for="k in outfitKeys" :key="k"><strong>{{ k }}</strong><div>{{ (guest['ç€è£…'] && guest['ç€è£…'][k]) ?? 'â€”' }}</div></div></div></div></div></div><div class="guest-info"><div>å½“å‰å¿ƒæƒ…: <strong>{{ guest['å½“å‰å¿ƒæƒ…'] ?? 'â€”' }}</strong></div><div>æ­£åœ¨å¹²å˜›: <strong>{{ guest['æ­£åœ¨å¹²å˜›'] ?? 'â€”' }}</strong></div><div>å½“å‰è®¡åˆ’: <strong>{{ guest['å½“å‰è®¡åˆ’'] ?? 'â€”' }}</strong></div></div></div><div v-else class="empty-room">æˆ¿é—´æš‚æ— æˆ¿å®¢</div></div></div><div v-if="tab==='é“å…·'"><div v-if="Object.keys(items).length === 0" class="empty-state" data-type="props">èƒŒåŒ…ç©ºç©ºå¦‚ä¹Ÿ</div><div v-else class="list-cards"><div class="card-block" v-for="(it,k) in items" :key="k"><h4>{{ k }}</h4><div>{{ it['æè¿°'] ?? it['description'] ?? 'â€”' }}</div><div>æ•°é‡: {{ it['æ•°é‡'] ?? it['count'] ?? 'â€”' }}</div></div></div></div><div v-if="tab==='ç›‘æ§'"><div v-if="Object.keys(monitors).length === 0" class="empty-state" data-type="monitor">æš‚æ— ç›‘æ§è®¾å¤‡</div><div v-else class="list-cards"><div class="card-block" v-for="(v,k) in monitors" :key="k"><h4>{{ k }}</h4><div>{{ v }}</div></div></div></div><div v-if="tab==='äº‹åŠ¡'"><div v-if="tasks.length === 0" class="empty-state" data-type="tasks">æš‚æ— å¾…å¤„ç†äº‹åŠ¡</div><div v-else class="list-cards"><div class="card-block" v-for="(t,idx) in tasks" :key="idx"><div>{{ t }}</div></div></div></div></div><script type="module">const{createApp:createApp,ref:ref,computed:computed,onMounted:onMounted}=Vue;function _getGlobal(e){return window[e]}function getAllVariables(){return"function"==typeof _getGlobal("getAllVariables")?_getGlobal("getAllVariables")():window.__mock_variables||{}}async function waitInit(){const e=_getGlobal("waitGlobalInitialized");"function"==typeof e&&await e("Mvu")}createApp({setup(){const e=ref("æˆ¿å®¢"),t=["201","202","203","204","205"],a=ref(t[0]),l=ref(getAllVariables()),u=computed(()=>l.value.stat_data||{}),o=ref(!0),n=ref(!0);const i=computed(()=>Object.keys(u.value["æˆ¿å®¢"]||{})),r=computed(()=>t.indexOf(a.value)),s=computed(()=>i.value[r.value]||null),c=computed(()=>s.value?u.value["æˆ¿å®¢"][s.value]:null),p=computed(()=>{if(!c.value)return null;const e=c.value,t=e["ç«‹ç»˜"]||e.portrait||e["å¤´åƒ"]||e.avatar||e.avatarUrl||e.image;if(!t)return null;if(/^https?:\/\//.test(t)||t.startsWith("/"))return t;if(t.includes("/"))return t;const a=s.value||"";return`/user/images/${encodeURIComponent(a)}/${encodeURIComponent(t)}`}),v=computed(()=>u.value["ç‰©å“æ "]||{}),f=computed(()=>u.value["å¯ç›‘æ§åŒºåŸŸ"]||{}),d=computed(()=>u.value["è¿‘æœŸäº‹åŠ¡"]||[]);return onMounted(async()=>{function e(){l.value=getAllVariables()}await waitInit(),e(),setInterval(e,2e3)}),{tab:e,rooms:t,activeRoom:a,setRoom:function(e){a.value=e},stat:u,guest:c,guestName:s,portraitSrc:p,basicKeys:["ç§æ—","ç­‰çº§","èº«é«˜","ä¸‰å›´","ç½©æ¯","å¹´é¾„"],outfitKeys:["ä¸Šè£…","ä¸‹è£…","å†…è¡£","è¢œå­","é‹å­","é¥°å“"],items:v,monitors:f,tasks:d,isBasicCollapsed:o,isOutfitCollapsed:n,toggleCollapse:function(e){"basic"===e?o.value=!o.value:"outfit"===e&&(n.value=!n.value)}}}}).mount("#app")</script></body></html>